"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fetchCategoryList = fetchCategoryList;
exports.fetchItemDetail = fetchItemDetail;
exports.fetchItemList = fetchItemList;
exports.modifyItem = modifyItem;
exports.saveCategory = saveCategory;
exports.saveItem = saveItem;
var _mallItem = _interopRequireDefault(require("@global-common/db/model/mall-item"));
var _category = _interopRequireDefault(require("@global-common/db/model/category"));
var _httpError = require("@global-common/error/http-error");
var _itemCategory = _interopRequireDefault(require("@global-common/db/model/item-category"));
var _logger = require("@global-common/utils/logger");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const logger = (0, _logger.getLogger)('mall-controller.ts');
async function saveCategory(name) {
  const category = await (0, _category.default)().findOne({
    where: {
      name
    }
  });
  if (category) throw new _httpError.BadRequest(_httpError.ALREADY_EXISTS, '이미 존재하는 카테고리입니다.');
  await (0, _category.default)().create({
    name
  });
}
async function saveItem(param, file) {
  const {
    categoryId,
    name,
    price,
    description
  } = param;
  const category = await (0, _category.default)().findOne({
    where: {
      id: categoryId
    }
  });
  if (!category) throw new _httpError.BadRequest(_httpError.NO_DATA, '존재하지 않는 카테고리입니다.');
  const item = await (0, _mallItem.default)().create({
    name,
    price,
    description
  });
  const itemId = item.id;
  logger.info(`itemId: ${itemId}`);
  const itemCategory = await (0, _itemCategory.default)().findOne({
    where: {
      mallItemId: itemId,
      categoryId
    }
  });
  if (!itemCategory) {
    await (0, _itemCategory.default)().create({
      mallItemId: itemId,
      categoryId
    });
  }
  if (!file) throw new _httpError.BadRequest(_httpError.NO_DATA, '이미지 파일이 없습니다.');
  const fileName = file.filename;
  await item.update({
    image: fileName
  });
}
async function fetchItemList(param) {
  const {
    categoryId,
    page
  } = param;
  const where = {};
  if (categoryId) where.categoryId = categoryId;
  if (page) {
    where.offset = (page - 1) * 10;
    where.limit = 10;
  }
  const {
    count,
    rows
  } = await (0, _mallItem.default)().findAndCountAll({
    attributes: ['id', 'name', 'price', 'description', 'image'],
    where,
    orderBy: [['id', 'DESC']],
    include: {
      model: (0, _itemCategory.default)(),
      attributes: ['id'],
      include: {
        model: (0, _category.default)(),
        attributes: ['name']
      }
    }
  });
  const items = rows.map(row => {
    row.image = row.image ? `https://api.mybebe.net/uploads/images/${row.image}` : null;
    return row;
  });
  return {
    count,
    items
  };
}
async function fetchCategoryList() {
  return (0, _category.default)().findAll({
    attributes: ['id', 'name']
  });
}
async function fetchItemDetail(id) {
  const item = await (0, _mallItem.default)().findOne({
    where: {
      id
    },
    include: {
      model: (0, _itemCategory.default)(),
      attributes: ['id'],
      include: {
        model: (0, _category.default)(),
        attributes: ['name']
      }
    }
  });
  if (!item) throw new _httpError.BadRequest(_httpError.NO_DATA, '존재하지 않는 상품입니다.');
  item.image = item.image ? `https://api.mybebe.net/uploads/images/${item.image}` : null;
  return item;
}
async function modifyItem(param, file) {
  const {
    id
  } = param;
  const item = await (0, _mallItem.default)().findOne({
    where: {
      id
    }
  });
  if (!item) throw new _httpError.BadRequest(_httpError.NO_DATA, '존재하지 않는 상품입니다.');
  const fileName = file?.filename;
  await item.update({
    ...param,
    image: fileName
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dnZXIiLCJnZXRMb2dnZXIiLCJzYXZlQ2F0ZWdvcnkiLCJuYW1lIiwiY2F0ZWdvcnkiLCJDYXRlZ29yeSIsImZpbmRPbmUiLCJ3aGVyZSIsIkJhZFJlcXVlc3QiLCJBTFJFQURZX0VYSVNUUyIsImNyZWF0ZSIsInNhdmVJdGVtIiwicGFyYW0iLCJmaWxlIiwiY2F0ZWdvcnlJZCIsInByaWNlIiwiZGVzY3JpcHRpb24iLCJpZCIsIk5PX0RBVEEiLCJpdGVtIiwiTWFsbEl0ZW0iLCJpdGVtSWQiLCJpbmZvIiwiaXRlbUNhdGVnb3J5IiwiSXRlbUNhdGVnb3J5IiwibWFsbEl0ZW1JZCIsImZpbGVOYW1lIiwiZmlsZW5hbWUiLCJ1cGRhdGUiLCJpbWFnZSIsImZldGNoSXRlbUxpc3QiLCJwYWdlIiwib2Zmc2V0IiwibGltaXQiLCJjb3VudCIsInJvd3MiLCJmaW5kQW5kQ291bnRBbGwiLCJhdHRyaWJ1dGVzIiwib3JkZXJCeSIsImluY2x1ZGUiLCJtb2RlbCIsIml0ZW1zIiwibWFwIiwicm93IiwiZmV0Y2hDYXRlZ29yeUxpc3QiLCJmaW5kQWxsIiwiZmV0Y2hJdGVtRGV0YWlsIiwibW9kaWZ5SXRlbSJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kaWFyeS1zZXJ2ZXIvY29udHJvbGxlci9tYWxsLWNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1hbGxJdGVtIGZyb20gJ0BnbG9iYWwtY29tbW9uL2RiL21vZGVsL21hbGwtaXRlbSdcclxuaW1wb3J0IENhdGVnb3J5IGZyb20gJ0BnbG9iYWwtY29tbW9uL2RiL21vZGVsL2NhdGVnb3J5J1xyXG5pbXBvcnQgeyBBTFJFQURZX0VYSVNUUywgQmFkUmVxdWVzdCwgTk9fREFUQSB9IGZyb20gJ0BnbG9iYWwtY29tbW9uL2Vycm9yL2h0dHAtZXJyb3InXHJcbmltcG9ydCBJdGVtQ2F0ZWdvcnkgZnJvbSAnQGdsb2JhbC1jb21tb24vZGIvbW9kZWwvaXRlbS1jYXRlZ29yeSdcclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnQGdsb2JhbC1jb21tb24vdXRpbHMvbG9nZ2VyJ1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdtYWxsLWNvbnRyb2xsZXIudHMnKVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVDYXRlZ29yeSAobmFtZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgY2F0ZWdvcnkgPSBhd2FpdCBDYXRlZ29yeSgpLmZpbmRPbmUoeyB3aGVyZTogeyBuYW1lIH0gfSlcclxuXHJcbiAgaWYgKGNhdGVnb3J5KSB0aHJvdyBuZXcgQmFkUmVxdWVzdChBTFJFQURZX0VYSVNUUywgJ+ydtOuvuCDsobTsnqztlZjripQg7Lm07YWM6rOg66as7J6F64uI64ukLicpXHJcblxyXG4gIGF3YWl0IENhdGVnb3J5KCkuY3JlYXRlKHsgbmFtZSB9KVxyXG59XHJcblxyXG5pbnRlcmZhY2UgaXRlbVBhcmFtIHtcclxuICBjYXRlZ29yeUlkOiBudW1iZXJcclxuICBuYW1lOiBzdHJpbmdcclxuICBwcmljZTogbnVtYmVyXHJcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlSXRlbSAocGFyYW06IGl0ZW1QYXJhbSwgZmlsZSkge1xyXG4gIGNvbnN0IHsgY2F0ZWdvcnlJZCwgbmFtZSwgcHJpY2UsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbVxyXG5cclxuICBjb25zdCBjYXRlZ29yeSA9IGF3YWl0IENhdGVnb3J5KCkuZmluZE9uZSh7IHdoZXJlOiB7IGlkOiBjYXRlZ29yeUlkIH0gfSlcclxuXHJcbiAgaWYgKCFjYXRlZ29yeSkgdGhyb3cgbmV3IEJhZFJlcXVlc3QoTk9fREFUQSwgJ+yhtOyerO2VmOyngCDslYrripQg7Lm07YWM6rOg66as7J6F64uI64ukLicpXHJcblxyXG4gIGNvbnN0IGl0ZW0gPSBhd2FpdCBNYWxsSXRlbSgpLmNyZWF0ZSh7IG5hbWUsIHByaWNlLCBkZXNjcmlwdGlvbiB9KVxyXG5cclxuICBjb25zdCBpdGVtSWQgPSBpdGVtLmlkXHJcblxyXG4gIGxvZ2dlci5pbmZvKGBpdGVtSWQ6ICR7aXRlbUlkfWApXHJcblxyXG4gIGNvbnN0IGl0ZW1DYXRlZ29yeSA9IGF3YWl0IEl0ZW1DYXRlZ29yeSgpLmZpbmRPbmUoeyB3aGVyZTogeyBtYWxsSXRlbUlkOiBpdGVtSWQsIGNhdGVnb3J5SWQgfSB9KVxyXG5cclxuICBpZiAoIWl0ZW1DYXRlZ29yeSkge1xyXG4gICAgYXdhaXQgSXRlbUNhdGVnb3J5KCkuY3JlYXRlKHsgbWFsbEl0ZW1JZDogaXRlbUlkLCBjYXRlZ29yeUlkIH0pXHJcbiAgfVxyXG5cclxuICBpZiAoIWZpbGUpIHRocm93IG5ldyBCYWRSZXF1ZXN0KE5PX0RBVEEsICfsnbTrr7jsp4Ag7YyM7J287J20IOyXhuyKteuLiOuLpC4nKVxyXG5cclxuICBjb25zdCBmaWxlTmFtZSA9IGZpbGUuZmlsZW5hbWVcclxuXHJcbiAgYXdhaXQgaXRlbS51cGRhdGUoeyBpbWFnZTogZmlsZU5hbWUgfSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoSXRlbUxpc3QgKHBhcmFtOiB7Y2F0ZWdvcnlJZD86IG51bWJlciwgcGFnZT86IG51bWJlcn0pIHtcclxuICBjb25zdCB7IGNhdGVnb3J5SWQsIHBhZ2UgfSA9IHBhcmFtXHJcblxyXG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7fVxyXG5cclxuICBpZiAoY2F0ZWdvcnlJZCkgd2hlcmUuY2F0ZWdvcnlJZCA9IGNhdGVnb3J5SWRcclxuICBpZiAocGFnZSkge1xyXG4gICAgd2hlcmUub2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIDEwXHJcbiAgICB3aGVyZS5saW1pdCA9IDEwXHJcbiAgfVxyXG5cclxuICBjb25zdCB7IGNvdW50LCByb3dzIH0gPSBhd2FpdCBNYWxsSXRlbSgpLmZpbmRBbmRDb3VudEFsbCh7XHJcbiAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ25hbWUnLCAncHJpY2UnLCAnZGVzY3JpcHRpb24nLCAnaW1hZ2UnXSxcclxuICAgIHdoZXJlLFxyXG4gICAgb3JkZXJCeTogW1snaWQnLCAnREVTQyddXSxcclxuICAgIGluY2x1ZGU6IHtcclxuICAgICAgbW9kZWw6IEl0ZW1DYXRlZ29yeSgpLFxyXG4gICAgICBhdHRyaWJ1dGVzOiBbJ2lkJ10sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICBtb2RlbDogQ2F0ZWdvcnkoKSxcclxuICAgICAgICBhdHRyaWJ1dGVzOiBbJ25hbWUnXSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgaXRlbXMgPSByb3dzLm1hcChyb3cgPT4ge1xyXG4gICAgcm93LmltYWdlID0gcm93LmltYWdlID8gYGh0dHBzOi8vYXBpLm15YmViZS5uZXQvdXBsb2Fkcy9pbWFnZXMvJHtyb3cuaW1hZ2V9YCA6IG51bGxcclxuICAgIHJldHVybiByb3dcclxuICB9KVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY291bnQsXHJcbiAgICBpdGVtcyxcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaENhdGVnb3J5TGlzdCAoKSB7XHJcbiAgcmV0dXJuIENhdGVnb3J5KCkuZmluZEFsbCh7XHJcbiAgICBhdHRyaWJ1dGVzOiBbJ2lkJywgJ25hbWUnXSxcclxuICB9KVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hJdGVtRGV0YWlsIChpZDogbnVtYmVyKSB7XHJcbiAgY29uc3QgaXRlbSA9IGF3YWl0IE1hbGxJdGVtKCkuZmluZE9uZSh7XHJcbiAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgaW5jbHVkZToge1xyXG4gICAgICBtb2RlbDogSXRlbUNhdGVnb3J5KCksXHJcbiAgICAgIGF0dHJpYnV0ZXM6IFsnaWQnXSxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIG1vZGVsOiBDYXRlZ29yeSgpLFxyXG4gICAgICAgIGF0dHJpYnV0ZXM6IFsnbmFtZSddLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICB9KVxyXG5cclxuICBpZiAoIWl0ZW0pIHRocm93IG5ldyBCYWRSZXF1ZXN0KE5PX0RBVEEsICfsobTsnqztlZjsp4Ag7JWK64qUIOyDge2SiOyeheuLiOuLpC4nKVxyXG5cclxuICBpdGVtLmltYWdlID0gaXRlbS5pbWFnZSA/IGBodHRwczovL2FwaS5teWJlYmUubmV0L3VwbG9hZHMvaW1hZ2VzLyR7aXRlbS5pbWFnZX1gIDogbnVsbFxyXG5cclxuICByZXR1cm4gaXRlbVxyXG59XHJcblxyXG5pbnRlcmZhY2UgbW9kaWZ5UGFyYW0ge1xyXG4gIGlkOiBudW1iZXJcclxuICBjYXRlZ29yeUlkOiBudW1iZXJcclxuICBuYW1lOiBzdHJpbmdcclxuICBwcmljZTogbnVtYmVyXHJcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtb2RpZnlJdGVtIChwYXJhbTogbW9kaWZ5UGFyYW0sIGZpbGUpIHtcclxuICBjb25zdCB7IGlkIH0gPSBwYXJhbVxyXG5cclxuICBjb25zdCBpdGVtID0gYXdhaXQgTWFsbEl0ZW0oKS5maW5kT25lKHsgd2hlcmU6IHsgaWQgfSB9KVxyXG5cclxuICBpZiAoIWl0ZW0pIHRocm93IG5ldyBCYWRSZXF1ZXN0KE5PX0RBVEEsICfsobTsnqztlZjsp4Ag7JWK64qUIOyDge2SiOyeheuLiOuLpC4nKVxyXG5cclxuICBjb25zdCBmaWxlTmFtZSA9IGZpbGU/LmZpbGVuYW1lXHJcblxyXG4gIGF3YWl0IGl0ZW0udXBkYXRlKHsgLi4ucGFyYW0sIGltYWdlOiBmaWxlTmFtZSB9KVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQXVEO0FBRXZELE1BQU1BLE1BQU0sR0FBRyxJQUFBQyxpQkFBUyxFQUFDLG9CQUFvQixDQUFDO0FBRXZDLGVBQWVDLFlBQVksQ0FBRUMsSUFBWSxFQUFFO0VBQ2hELE1BQU1DLFFBQVEsR0FBRyxNQUFNLElBQUFDLGlCQUFRLEdBQUUsQ0FBQ0MsT0FB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