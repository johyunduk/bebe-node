"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = dbRoutes;
var _lodash = _interopRequireDefault(require("lodash"));
var _sequelize = require("sequelize");
var _express = require("express");
var _asyncHandler = _interopRequireDefault(require("./helper/asyncHandler"));
var _httpError = require("../../error/http-error");
var _utils = require("../../utils");
var _logger = require("../../utils/logger");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const logger = (0, _logger.getLogger)('db-access-routes.ts');
function toRawInsertQuery(model, obj) {
  const keys = Object.keys(obj).join(',');
  const values = Object.values(obj).map(it => typeof it === 'number' ? it : `'${it}'`).join(',');
  const query = `INSERT INTO ${model.name} (${keys}) VALUES (${values})`;
  return query;
}
function dbRoutes(getDB) {
  const router = (0, _express.Router)();
  const insertQuery = sql => getDB().query(sql, {
    type: _sequelize.QueryTypes.INSERT
  });
  // API 요청 형태는 api 버전과 관계 없이 다음과 같음. 예) http://localhost:7001/db/app_user/select
  router.get('/:db/:table/:op?', (0, _asyncHandler.default)(crud));
  router.post('/:db/:table/:op', (0, _asyncHandler.default)(crud));
  async function crud(req, res) {
    const {
      db,
      table
    } = req.params;
    const op = req.params.op || 'select';
    let body = req.body;
    if (_lodash.default.isEmpty(body)) {
      body = req.query;
    }
    const limit = +body.$limit || undefined;
    const order = body.$order;
    const raw = body.$raw;
    delete body.$raw;
    delete body.$limit;
    delete body.$order;
    const database = getDB(db).models;
    logger.debug('crud db, table, op, body:', db, table, op, body);
    const dbModel = database[table];
    if (!dbModel) {
      throw new _httpError.NotFound('NO_MODEL_DEFINITION', `Model ${db}.${table} does not exist!`);
    }
    let result;
    try {
      logger.debug(`db-access-routes op:${op} BEGIN:`);
      switch (op) {
        case 'count':
          result = await dbModel.count({
            where: body
          });
          result = {
            count: result
          };
          break;
        case 'select':
          result = await dbModel.findAll({
            where: body,
            limit,
            order,
            raw: true
          });
          break;
        case 'insert':
          if (_lodash.default.isArray(body)) {
            await dbModel.bulkCreate(body);
            result = body.length + ' inserted!';
          } else if (raw) {
            // updatedAt등을 강제로 세팅하기 위해 raw query로 insert 함.
            const [id] = await insertQuery(toRawInsertQuery(dbModel, body));
            result = await dbModel.findOne({
              id
            }, {
              raw: true
            });
          } else {
            const data = await dbModel.create(body);
            result = data.get();
          }
          break;
        case 'update':
          result = await dbModel.update(body.toUpdate, {
            where: body.where
          });
          break;
        case 'delete':
          result = await dbModel.destroy({
            where: body
          });
          result = {
            deleted: result
          };
          break;
        default:
          throw new _httpError.NotFound('OPERATION_NOT_FOUND', 'db operation is not supported:' + op);
      }
      logger.debug(`db-access-routes op:${op} END:`);
    } catch (err) {
      logger.error(`db-access-routes op:${op} error:`, err.message);
      throw err;
    }
    logger.debug('db-access-routes dbRoutes result:', (0, _utils.toPlain)(result));
    res.send(result);
  }
  return router;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dnZXIiLCJnZXRMb2dnZXIiLCJ0b1Jhd0luc2VydFF1ZXJ5IiwibW9kZWwiLCJvYmoiLCJrZXlzIiwiT2JqZWN0Iiwiam9pbiIsInZhbHVlcyIsIm1hcCIsIml0IiwicXVlcnkiLCJuYW1lIiwiZGJSb3V0ZXMiLCJnZXREQiIsInJvdXRlciIsIlJvdXRlciIsImluc2VydFF1ZXJ5Iiwic3FsIiwidHlwZSIsIlF1ZXJ5VHlwZXMiLCJJTlNFUlQiLCJnZXQiLCJhc3luY0hhbmRsZXIiLCJjcnVkIiwicG9zdCIsInJlcSIsInJlcyIsImRiIiwidGFibGUiLCJwYXJhbXMiLCJvcCIsImJvZHkiLCJfIiwiaXNFbXB0eSIsImxpbWl0IiwiJGxpbWl0IiwidW5kZWZpbmVkIiwib3JkZXIiLCIkb3JkZXIiLCJyYXciLCIkcmF3IiwiZGF0YWJhc2UiLCJtb2RlbHMiLCJkZWJ1ZyIsImRiTW9kZWwiLCJOb3RGb3VuZCIsInJlc3VsdCIsImNvdW50Iiwid2hlcmUiLCJmaW5kQWxsIiwiaXNBcnJheSIsImJ1bGtDcmVhdGUiLCJsZW5ndGgiLCJpZCIsImZpbmRPbmUiLCJkYXRhIiwiY3JlYXRlIiwidXBkYXRlIiwidG9VcGRhdGUiLCJkZXN0cm95IiwiZGVsZXRlZCIsImVyciIsImVycm9yIiwibWVzc2FnZSIsInRvUGxhaW4iLCJzZW5kIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2dsb2JhbC1jb21tb24vc2VydmVyL3JvdXRlcy9kYi1hY2Nlc3Mtcm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCdcclxuaW1wb3J0IHsgT3AsIFF1ZXJ5VHlwZXMgfSBmcm9tICdzZXF1ZWxpemUnXHJcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnXHJcbmltcG9ydCBhc3luY0hhbmRsZXIgZnJvbSAnLi9oZWxwZXIvYXN5bmNIYW5kbGVyJ1xyXG5pbXBvcnQgeyBOb3RGb3VuZCB9IGZyb20gJy4uLy4uL2Vycm9yL2h0dHAtZXJyb3InXHJcbmltcG9ydCB7IHRvUGxhaW4gfSBmcm9tICcuLi8uLi91dGlscydcclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9nZ2VyJ1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdkYi1hY2Nlc3Mtcm91dGVzLnRzJylcclxuXHJcbmZ1bmN0aW9uIHRvUmF3SW5zZXJ0UXVlcnkgKG1vZGVsLCBvYmopIHtcclxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqKS5qb2luKCcsJylcclxuICBjb25zdCB2YWx1ZXMgPSBPYmplY3QudmFsdWVzKG9iailcclxuICAgIC5tYXAoKGl0KSA9PiAodHlwZW9mIGl0ID09PSAnbnVtYmVyJyA/IGl0IDogYCcke2l0fSdgKSlcclxuICAgIC5qb2luKCcsJylcclxuICBjb25zdCBxdWVyeSA9IGBJTlNFUlQgSU5UTyAke21vZGVsLm5hbWV9ICgke2tleXN9KSBWQUxVRVMgKCR7dmFsdWVzfSlgXHJcbiAgcmV0dXJuIHF1ZXJ5XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRiUm91dGVzIChnZXREQikge1xyXG4gIGNvbnN0IHJvdXRlciA9IFJvdXRlcigpXHJcbiAgY29uc3QgaW5zZXJ0UXVlcnkgPSAoc3FsKSA9PiBnZXREQigpLnF1ZXJ5KHNxbCwgeyB0eXBlOiBRdWVyeVR5cGVzLklOU0VSVCB9KVxyXG4gIC8vIEFQSSDsmpTssq0g7ZiV7YOc64qUIGFwaSDrsoTsoITqs7wg6rSA6rOEIOyXhuydtCDri6TsnYzqs7wg6rCZ7J2MLiDsmIgpIGh0dHA6Ly9sb2NhbGhvc3Q6NzAwMS9kYi9hcHBfdXNlci9zZWxlY3RcclxuICByb3V0ZXIuZ2V0KCcvOmRiLzp0YWJsZS86b3A/JywgYXN5bmNIYW5kbGVyKGNydWQpKVxyXG4gIHJvdXRlci5wb3N0KCcvOmRiLzp0YWJsZS86b3AnLCBhc3luY0hhbmRsZXIoY3J1ZCkpXHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGNydWQgKHJlcSwgcmVzKSB7XHJcbiAgICBjb25zdCB7IGRiLCB0YWJsZSB9ID0gcmVxLnBhcmFtc1xyXG4gICAgY29uc3Qgb3AgPSByZXEucGFyYW1zLm9wIHx8ICdzZWxlY3QnXHJcblxyXG4gICAgbGV0IGJvZHkgPSByZXEuYm9keVxyXG4gICAgaWYgKF8uaXNFbXB0eShib2R5KSkge1xyXG4gICAgICBib2R5ID0gcmVxLnF1ZXJ5XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaW1pdCA9ICtib2R5LiRsaW1pdCB8fCB1bmRlZmluZWRcclxuICAgIGNvbnN0IG9yZGVyID0gYm9keS4kb3JkZXJcclxuICAgIGNvbnN0IHJhdyA9IGJvZHkuJHJhd1xyXG4gICAgZGVsZXRlIGJvZHkuJHJhd1xyXG4gICAgZGVsZXRlIGJvZHkuJGxpbWl0XHJcbiAgICBkZWxldGUgYm9keS4kb3JkZXJcclxuXHJcbiAgICBjb25zdCBkYXRhYmFzZSA9IGdldERCKGRiKS5tb2RlbHNcclxuXHJcbiAgICBsb2dnZXIuZGVidWcoJ2NydWQgZGIsIHRhYmxlLCBvcCwgYm9keTonLCBkYiwgdGFibGUsIG9wLCBib2R5KVxyXG4gICAgY29uc3QgZGJNb2RlbCA9IGRhdGFiYXNlW3RhYmxlXVxyXG5cclxuICAgIGlmICghZGJNb2RlbCkge1xyXG4gICAgICB0aHJvdyBuZXcgTm90Rm91bmQoJ05PX01PREVMX0RFRklOSVRJT04nLCBgTW9kZWwgJHtkYn0uJHt0YWJsZX0gZG9lcyBub3QgZXhpc3QhYClcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgbG9nZ2VyLmRlYnVnKGBkYi1hY2Nlc3Mtcm91dGVzIG9wOiR7b3B9IEJFR0lOOmApXHJcbiAgICAgIHN3aXRjaCAob3ApIHtcclxuICAgICAgICBjYXNlICdjb3VudCc6XHJcbiAgICAgICAgICByZXN1bHQgPSBhd2FpdCBkYk1vZGVsLmNvdW50KHsgd2hlcmU6IGJvZHkgfSlcclxuICAgICAgICAgIHJlc3VsdCA9IHsgY291bnQ6IHJlc3VsdCB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ3NlbGVjdCc6XHJcbiAgICAgICAgICByZXN1bHQgPSBhd2FpdCBkYk1vZGVsLmZpbmRBbGwoeyB3aGVyZTogYm9keSwgbGltaXQsIG9yZGVyLCByYXc6IHRydWUgfSlcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnaW5zZXJ0JzpcclxuICAgICAgICAgIGlmIChfLmlzQXJyYXkoYm9keSkpIHtcclxuICAgICAgICAgICAgYXdhaXQgZGJNb2RlbC5idWxrQ3JlYXRlKGJvZHkpXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGJvZHkubGVuZ3RoICsgJyBpbnNlcnRlZCEnXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHJhdykge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGVkQXTrk7HsnYQg6rCV7KCc66GcIOyEuO2Mhe2VmOq4sCDsnITtlbQgcmF3IHF1ZXJ566GcIGluc2VydCDtlaguXHJcbiAgICAgICAgICAgIGNvbnN0IFtpZF0gPSBhd2FpdCBpbnNlcnRRdWVyeSh0b1Jhd0luc2VydFF1ZXJ5KGRiTW9kZWwsIGJvZHkpKVxyXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBkYk1vZGVsLmZpbmRPbmUoeyBpZCB9LCB7IHJhdzogdHJ1ZSB9KVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGRiTW9kZWwuY3JlYXRlKGJvZHkpXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGRhdGEuZ2V0KClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAndXBkYXRlJzpcclxuICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiTW9kZWwudXBkYXRlKGJvZHkudG9VcGRhdGUsIHsgd2hlcmU6IGJvZHkud2hlcmUgfSlcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGRiTW9kZWwuZGVzdHJveSh7IHdoZXJlOiBib2R5IH0pXHJcbiAgICAgICAgICByZXN1bHQgPSB7IGRlbGV0ZWQ6IHJlc3VsdCB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmQoJ09QRVJBVElPTl9OT1RfRk9VTkQnLCAnZGIgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQ6JyArIG9wKVxyXG4gICAgICB9XHJcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgZGItYWNjZXNzLXJvdXRlcyBvcDoke29wfSBFTkQ6YClcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYGRiLWFjY2Vzcy1yb3V0ZXMgb3A6JHtvcH0gZXJyb3I6YCwgZXJyLm1lc3NhZ2UpXHJcbiAgICAgIHRocm93IGVyclxyXG4gICAgfVxyXG4gICAgbG9nZ2VyLmRlYnVnKCdkYi1hY2Nlc3Mtcm91dGVzIGRiUm91dGVzIHJlc3VsdDonLCB0b1BsYWluKHJlc3VsdCkpXHJcbiAgICByZXMuc2VuZChyZXN1bHQpXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcm91dGVyXHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUE4QztBQUU5QyxNQUFNQSxNQUFNLEdBQUcsSUFBQUMsaUJBQVMsRUFBQyxxQkFBcUIsQ0FBQztBQUUvQyxTQUFTQyxnQkFBZ0IsQ0FBRUMsS0FBSyxFQUFFQyxHQUFHLEVBQUU7RUFDckMsTUFBTUMsSUFBSSxHQUFHQyxNQUFNLENBQUNELElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUNHLElBQUksQ0FBQyxHQUFHLENBQUM7RUFDdkMsTUFBTUMsTUFBTSxHQUFHRixNQUFNLENBQUNFLE1BQU0sQ0FBQ0osR0FBRyxDQUFDLENBQzlCSyxHQUFHLENBQUVDLEVBQUUsSUFBTSxPQUFPQSxFQUFFLEtBQUssUUFBUSxHQUFHQSxFQUFFLEdBQUksSUFBR0Es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